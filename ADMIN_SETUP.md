# 管理者向けアプリ セットアップガイド

## 概要

管理者向けアプリ（admin/）は、システム管理者がプラットフォーム全体を管理するためのダッシュボードです。

## 機能

### 1. ダッシュボード
- 統計情報の表示
  - 主催者数（承認待ち/承認済み）
  - 出店者数
  - イベント数（承認待ち/承認済み）
  - 申し込み数（審査中/承認/却下）
- 承認待ち項目の一覧表示

### 2. 主催者管理
- 主催者一覧表示
- フィルター（すべて/承認待ち/承認済み）
- 主催者の承認・却下
- 主催者情報の確認

### 3. 出店者管理
- 出店者一覧表示（テーブル形式）
- 検索機能
- 出店者情報の確認

### 4. イベント管理
- イベント一覧表示
- フィルター（すべて/承認待ち/承認済み）
- イベントの承認
- イベント情報の確認

## セットアップ

### 1. 依存関係のインストール

```bash
cd admin
npm install
```

### 2. 環境変数の設定

`.env.local`ファイルを作成：

```env
# Supabase設定
NEXT_PUBLIC_SUPABASE_URL=https://your-project-ref.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# 管理者メールアドレス（カンマ区切り）
NEXT_PUBLIC_ADMIN_EMAILS=admin@example.com,admin2@example.com
```

**重要**: 
- `NEXT_PUBLIC_ADMIN_EMAILS`には、管理者としてログイン可能なメールアドレスをカンマ区切りで指定します
- これらのメールアドレスでSupabaseに登録されている必要があります

### 3. アプリの起動

```bash
cd admin
npm run dev
```

ブラウザで http://localhost:3003 にアクセス

## 使用方法

### ログイン

1. 管理者用のメールアドレスとパスワードでログイン
2. メールアドレスが`NEXT_PUBLIC_ADMIN_EMAILS`に含まれている必要があります

### 主催者の承認

1. 「主催者管理」をクリック
2. 「承認待ち」フィルターを選択
3. 承認する主催者の「承認」ボタンをクリック

### イベントの承認

1. 「イベント管理」をクリック
2. 「承認待ち」フィルターを選択
3. 承認するイベントの「承認」ボタンをクリック

## セキュリティ

- 管理者権限はメールアドレスベースで制御
- 管理者以外はログインできません
- セッション管理は他のアプリと同様に実装

## トラブルシューティング

### ログインできない

- メールアドレスが`NEXT_PUBLIC_EMAILS`に含まれているか確認
- Supabaseでユーザーが作成されているか確認
- 環境変数が正しく設定されているか確認

### データが表示されない

- SupabaseのRLSポリシーを確認
- データベースにデータが存在するか確認
- ブラウザのコンソールでエラーを確認


