(()=>{var e={};e.id=616,e.ids=[616],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},1680:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(7),i=r(8533),o=r(9377),a=r.n(o),n=r(9799),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["auth",{children:["verify-email",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4541)),"/Users/mocky700/Desktop/デミセル/store/app/auth/verify-email/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,9224)),"/Users/mocky700/Desktop/デミセル/store/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,3472,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/mocky700/Desktop/デミセル/store/app/auth/verify-email/page.tsx"],m="/auth/verify-email/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/auth/verify-email/page",pathname:"/auth/verify-email",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9633:(e,t,r)=>{Promise.resolve().then(r.bind(r,953))},953:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(4714),i=r(128),o=r.n(i),a=r(7580),n=r(8934),l=r(466);function d(){let e=(0,n.useSearchParams)(),t=(0,n.useRouter)(),[r,i]=(0,a.useState)("verifying"),[d,c]=(0,a.useState)("");return(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:r},error:s}=await l.O.auth.getSession();if(s){console.error("Session error:",s),i("error"),c(s.message||"セッションの取得に失敗しました");return}if(r&&r.user){if(!r.user.email_confirmed_at){i("error"),c("メールアドレスの確認が完了していません。確認メールを再送信してください。");return}sessionStorage.setItem("auth_type","email"),sessionStorage.setItem("user_id",r.user.id),sessionStorage.setItem("user_email",r.user.email||"");let{data:e}=await l.O.from("exhibitors").select("id").eq("user_id",r.user.id).maybeSingle();i("success"),setTimeout(()=>{t.push("/")},2e3)}else{e.get("token");let r=e.get("token_hash"),s=e.get("type");if(r&&"signup"===s){let{data:e,error:s}=await l.O.auth.verifyOtp({token_hash:r,type:"signup"});if(s){console.error("Email verification error:",s),i("error"),c(s.message||"メールアドレスの確認に失敗しました");return}let{data:{session:o}}=await l.O.auth.getSession();if(o&&o.user){sessionStorage.setItem("auth_type","email"),sessionStorage.setItem("user_id",o.user.id),sessionStorage.setItem("user_email",o.user.email||"");let{data:e}=await l.O.from("exhibitors").select("id").eq("user_id",o.user.id).maybeSingle();i("success"),setTimeout(()=>{t.push("/")},2e3)}else i("error"),c("セッションの取得に失敗しました")}else i("error"),c("無効な確認リンクです。確認メールを再送信してください。")}}catch(e){console.error("Verification error:",e),i("error"),c(e.message||"メールアドレスの確認中にエラーが発生しました")}})()},[e,t]),s.jsx("div",{style:{background:"#F7F7F7",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsxs)("div",{style:{background:"#FFFFFF",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:"12px",padding:"48px 24px",maxWidth:"394px",width:"100%",textAlign:"center"},className:"jsx-d525c98fb358669b",children:["verifying"===r&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid #E5E5E5",borderTopColor:"#06C755",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 24px"},className:"jsx-d525c98fb358669b"}),s.jsx("h1",{style:{fontFamily:"Inter, sans-serif",fontSize:"20px",fontWeight:700,lineHeight:"120%",color:"#000000",marginBottom:"16px"},className:"jsx-d525c98fb358669b",children:"メールアドレスを確認中..."}),s.jsx("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"16px",lineHeight:"150%",color:"#666666"},className:"jsx-d525c98fb358669b",children:"少々お待ちください"})]}),"success"===r&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{style:{width:"64px",height:"64px",background:"#06C755",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},className:"jsx-d525c98fb358669b",children:s.jsx("span",{style:{fontSize:"32px",color:"#FFFFFF"},className:"jsx-d525c98fb358669b",children:"✓"})}),s.jsx("h1",{style:{fontFamily:"Inter, sans-serif",fontSize:"20px",fontWeight:700,lineHeight:"120%",color:"#000000",marginBottom:"16px"},className:"jsx-d525c98fb358669b",children:"メールアドレスの確認が完了しました"}),s.jsx("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"16px",lineHeight:"150%",color:"#666666",marginBottom:"24px"},className:"jsx-d525c98fb358669b",children:"登録フォームにリダイレクトします..."})]}),"error"===r&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{style:{width:"64px",height:"64px",background:"#FF3B30",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},className:"jsx-d525c98fb358669b",children:s.jsx("span",{style:{fontSize:"32px",color:"#FFFFFF"},className:"jsx-d525c98fb358669b",children:"\xd7"})}),s.jsx("h1",{style:{fontFamily:"Inter, sans-serif",fontSize:"20px",fontWeight:700,lineHeight:"120%",color:"#000000",marginBottom:"16px"},className:"jsx-d525c98fb358669b",children:"確認に失敗しました"}),s.jsx("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"16px",lineHeight:"150%",color:"#666666",marginBottom:"24px"},className:"jsx-d525c98fb358669b",children:d}),s.jsx("button",{onClick:()=>t.push("/"),style:{padding:"12px 24px",background:"#06C755",color:"#FFFFFF",borderRadius:"8px",border:"none",fontFamily:"Inter, sans-serif",fontSize:"16px",fontWeight:700,cursor:"pointer"},className:"jsx-d525c98fb358669b",children:"ホームに戻る"})]}),s.jsx(o(),{id:"d525c98fb358669b",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})})}},4541:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>i,default:()=>a});let s=(0,r(1481).createProxy)(String.raw`/Users/mocky700/Desktop/デミセル/store/app/auth/verify-email/page.tsx`),{__esModule:i,$$typeof:o}=s,a=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[499,95,905,732],()=>r(1680));module.exports=s})();