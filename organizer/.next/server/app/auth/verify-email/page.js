(()=>{var e={};e.id=616,e.ids=[616],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3868:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>c});var s=r(482),n=r(9108),i=r(2563),o=r.n(i),a=r(8300),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let c=["",{children:["auth",{children:["verify-email",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9409)),"/Users/mocky700/Desktop/デミセル/organizer/app/auth/verify-email/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2917)),"/Users/mocky700/Desktop/デミセル/organizer/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/mocky700/Desktop/デミセル/organizer/app/auth/verify-email/page.tsx"],d="/auth/verify-email/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/auth/verify-email/page",pathname:"/auth/verify-email",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5097:(e,t,r)=>{Promise.resolve().then(r.bind(r,4540))},3381:()=>{},2731:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},4540:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(2295),n=r(7983),i=r.n(n),o=r(3729),a=r(2254),l=r(2829);function c(){let e=(0,a.useSearchParams)(),t=(0,a.useRouter)(),[r,n]=(0,o.useState)("verifying"),[c,u]=(0,o.useState)("");return(0,o.useEffect)(()=>{(async()=>{try{let{data:{session:r},error:s}=await l.O.auth.getSession();if(s){console.error("Session error:",s),n("error"),u(s.message||"セッションの取得に失敗しました");return}if(r&&r.user){if(!r.user.email_confirmed_at){n("error"),u("メールアドレスの確認が完了していません。確認メールを再送信してください。");return}sessionStorage.setItem("auth_type","email"),sessionStorage.setItem("user_id",r.user.id),sessionStorage.setItem("user_email",r.user.email||"");let{data:e}=await l.O.from("organizers").select("id").eq("user_id",r.user.id).maybeSingle();n("success"),setTimeout(()=>{t.push("/")},2e3)}else{e.get("token");let r=e.get("token_hash"),s=e.get("type");if(r&&"signup"===s){let{data:e,error:s}=await l.O.auth.verifyOtp({token_hash:r,type:"signup"});if(s){console.error("Email verification error:",s),n("error"),u(s.message||"メールアドレスの確認に失敗しました");return}let{data:{session:i}}=await l.O.auth.getSession();if(i&&i.user){sessionStorage.setItem("auth_type","email"),sessionStorage.setItem("user_id",i.user.id),sessionStorage.setItem("user_email",i.user.email||"");let{data:e}=await l.O.from("organizers").select("id").eq("user_id",i.user.id).maybeSingle();n("success"),setTimeout(()=>{t.push("/")},2e3)}else n("error"),u("セッションの取得に失敗しました")}else n("error"),u("無効な確認リンクです。確認メールを再送信してください。")}}catch(e){console.error("Verification error:",e),n("error"),u(e.message||"メールアドレスの確認中にエラーが発生しました")}})()},[e,t]),s.jsx("div",{style:{background:"#F7F7F7",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.jsxs)("div",{style:{background:"#FFFFFF",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.1)",borderRadius:"12px",padding:"48px 24px",maxWidth:"394px",width:"100%",textAlign:"center"},className:"jsx-d525c98fb358669b",children:["verifying"===r&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{style:{width:"48px",height:"48px",border:"3px solid #E5E5E5",borderTopColor:"#FF8A5C",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 24px"},className:"jsx-d525c98fb358669b"}),s.jsx("h1",{style:{fontFamily:"Inter, sans-serif",fontSize:"20px",fontWeight:700,lineHeight:"120%",color:"#000000",marginBottom:"16px"},className:"jsx-d525c98fb358669b",children:"メールアドレスを確認中..."}),s.jsx("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"16px",lineHeight:"150%",color:"#666666"},className:"jsx-d525c98fb358669b",children:"少々お待ちください"})]}),"success"===r&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{style:{width:"64px",height:"64px",background:"#FF8A5C",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},className:"jsx-d525c98fb358669b",children:s.jsx("span",{style:{fontSize:"32px",color:"#FFFFFF"},className:"jsx-d525c98fb358669b",children:"✓"})}),s.jsx("h1",{style:{fontFamily:"Inter, sans-serif",fontSize:"20px",fontWeight:700,lineHeight:"120%",color:"#000000",marginBottom:"16px"},className:"jsx-d525c98fb358669b",children:"メールアドレスの確認が完了しました"}),s.jsx("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"16px",lineHeight:"150%",color:"#666666",marginBottom:"24px"},className:"jsx-d525c98fb358669b",children:"登録フォームにリダイレクトします..."})]}),"error"===r&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{style:{width:"64px",height:"64px",background:"#FF3B30",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px"},className:"jsx-d525c98fb358669b",children:s.jsx("span",{style:{fontSize:"32px",color:"#FFFFFF"},className:"jsx-d525c98fb358669b",children:"\xd7"})}),s.jsx("h1",{style:{fontFamily:"Inter, sans-serif",fontSize:"20px",fontWeight:700,lineHeight:"120%",color:"#000000",marginBottom:"16px"},className:"jsx-d525c98fb358669b",children:"確認に失敗しました"}),s.jsx("p",{style:{fontFamily:"Inter, sans-serif",fontSize:"16px",lineHeight:"150%",color:"#666666",marginBottom:"24px"},className:"jsx-d525c98fb358669b",children:c}),s.jsx("button",{onClick:()=>t.push("/"),style:{padding:"12px 24px",background:"#FF8A5C",color:"#FFFFFF",borderRadius:"8px",border:"none",fontFamily:"Inter, sans-serif",fontSize:"16px",fontWeight:700,cursor:"pointer"},className:"jsx-d525c98fb358669b",children:"ホームに戻る"})]}),s.jsx(i(),{id:"d525c98fb358669b",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})})}},2829:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var s=r(7635);let n="https://ybrsltkmllokexwyutik.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlicnNsdGttbGxva2V4d3l1dGlrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcxMjU5MDMsImV4cCI6MjA4MjcwMTkwM30.s3Y2qgbtCqrG2kuNXZk8hz3cEjCEWmPMC1zNU2mMHZ8";if(!n||!i)throw Error("Missing Supabase environment variables");let o=(0,s.eI)(n,i,{auth:{persistSession:!0,autoRefreshToken:!0}})},9408:()=>{},8630:(e,t,r)=>{r(9408);var s=r(3729),n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(s);function i(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o="undefined"!=typeof process&&process.env&&!0,a=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,r=t.name,s=void 0===r?"stylesheet":r,n=t.optimizeForSpeed,i=void 0===n?o:n;c(a(s),"`name` must be a string"),this._name=s,this._deletedRulePlaceholder="#"+s+"-deleted-rule____{}",c("boolean"==typeof i,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=i,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t,r=e.prototype;return r.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},r.isOptimizeForSpeed=function(){return this._optimizeForSpeed},r.inject=function(){var e=this;c(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,r){return"number"==typeof r?e._serverSheet.cssRules[r]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),r},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},r.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},r.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},r.insertRule=function(e,t){return c(a(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},r.replaceRule=function(e,t){this._optimizeForSpeed;var r=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!r.cssRules[e])return e;r.deleteRule(e);try{r.insertRule(t,e)}catch(s){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),r.insertRule(this._deletedRulePlaceholder,e)}return e},r.deleteRule=function(e){this._serverSheet.deleteRule(e)},r.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},r.cssRules=function(){return this._serverSheet.cssRules},r.makeStyleTag=function(e,t,r){t&&c(a(t),"makeStyleTag accepts only strings as second parameter");var s=document.createElement("style");this._nonce&&s.setAttribute("nonce",this._nonce),s.type="text/css",s.setAttribute("data-"+e,""),t&&s.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return r?n.insertBefore(s,r):n.appendChild(s),s},i(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),t&&i(e,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var u=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return t>>>0},d={};function m(e,t){if(!t)return"jsx-"+e;var r=String(t),s=e+r;return d[s]||(d[s]="jsx-"+u(e+"-"+r)),d[s]}function h(e,t){var r=e+(t=t.replace(/\/style/gi,"\\/style"));return d[r]||(d[r]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[r]}var p=s.createContext(null);p.displayName="StyleSheetContext",n.default.useInsertionEffect||n.default.useLayoutEffect;var f=void 0;function g(e){var t=f||s.useContext(p);return t&&t.add(e),null}g.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},t.style=g},7983:(e,t,r)=>{e.exports=r(8630).style},9409:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>o});let s=(0,r(6843).createProxy)(String.raw`/Users/mocky700/Desktop/デミセル/organizer/app/auth/verify-email/page.tsx`),{__esModule:n,$$typeof:i}=s,o=s.default},2917:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>n});var s=r(5036);r(7272);let n={title:"主催者向けイベントプラットフォーム",description:"イベントを主催するためのプラットフォーム"};function i({children:e}){return s.jsx("html",{lang:"ja",children:s.jsx("body",{children:e})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,312,247],()=>r(3868));module.exports=s})();