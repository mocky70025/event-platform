"use strict";exports.id=635,exports.ids=[635],exports.modules={8635:(e,i,t)=>{t.d(i,{Z:()=>d});var r=t(4714),o=t(7580),s=t(8934),n=t(466),a=t(1036);function d(){let e=(0,s.useSearchParams)().get("eventId"),[i,t]=(0,o.useState)([]),[d,l]=(0,o.useState)([]),[p,x]=(0,o.useState)(!0),[c,g]=(0,o.useState)(""),[h,m]=(0,o.useState)("all");(0,o.useEffect)(()=>{e&&f()},[e]),(0,o.useEffect)(()=>{u()},[i,h]);let f=async()=>{try{if(x(!0),!e){g("イベントIDが指定されていません");return}let{data:i,error:r}=await n.O.from("event_applications").select(`
          *,
          exhibitor:exhibitors (
            id,
            name,
            gender,
            age,
            phone_number,
            email,
            genre_category,
            genre_free_text,
            business_license_image_url,
            vehicle_inspection_image_url,
            automobile_inspection_image_url,
            pl_insurance_image_url,
            fire_equipment_layout_image_url
          )
        `).eq("event_id",e).order("applied_at",{ascending:!1});if(r)throw r;t(i||[])}catch(e){console.error("Error loading applications:",e),g(e.message||"申し込みの読み込みに失敗しました")}finally{x(!1)}},u=()=>{"all"===h?l(i):l(i.filter(e=>e.application_status===h))},b=async(e,t)=>{try{let{error:r}=await n.O.from("event_applications").update({application_status:t}).eq("id",e);if(r)throw r;let o=i.find(i=>i.id===e);if(o){let{data:i}=await n.O.from("exhibitors").select("user_id").eq("id",o.exhibitor.id).single();i&&i.user_id&&await n.O.from("notifications").insert({user_id:i.user_id,user_type:"exhibitor",notification_type:"approved"===t?"application_approved":"application_rejected",title:"approved"===t?"申し込みが承認されました":"申し込みが却下されました",message:"approved"===t?"あなたのイベント申し込みが承認されました。":"申し訳ございませんが、あなたのイベント申し込みが却下されました。",related_application_id:e,is_read:!1})}f()}catch(e){alert(e.message||"ステータスの更新に失敗しました")}},_=e=>{switch(e){case"pending":return"審査中";case"approved":return"承認済み";case"rejected":return"却下";default:return e}},j=e=>{switch(e){case"pending":return"#f39c12";case"approved":return"#27ae60";case"rejected":return"#e74c3c";default:return"#999"}};return p?r.jsx("div",{style:{padding:"20px"},children:r.jsx(a.Z,{})}):(0,r.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"#f5f5f5",paddingBottom:"80px"},children:[(0,r.jsxs)("div",{style:{backgroundColor:"white",padding:"16px",borderBottom:"1px solid #e0e0e0",position:"sticky",top:0,zIndex:100},children:[r.jsx("h1",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"16px"},children:"申し込み管理"}),r.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["all","pending","approved","rejected"].map(e=>r.jsx("button",{onClick:()=>m(e),style:{padding:"8px 16px",backgroundColor:h===e?"#FF6B35":"#f0f0f0",color:h===e?"white":"#333",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"all"===e?"すべて":_(e)},e))})]}),(0,r.jsxs)("div",{style:{padding:"20px"},children:[c&&r.jsx("div",{style:{padding:"16px",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"16px"},children:c}),0===d.length?(0,r.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[r.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCCB"}),r.jsx("div",{style:{fontSize:"16px"},children:"申し込みがありません"})]}):r.jsx("div",{style:{display:"grid",gap:"16px"},children:d.map(e=>(0,r.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[r.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold"},children:e.exhibitor.name}),r.jsx("span",{style:{padding:"4px 12px",backgroundColor:j(e.application_status),color:"white",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:_(e.application_status)})]}),(0,r.jsxs)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"12px"},children:[(0,r.jsxs)("div",{children:["性別: ",e.exhibitor.gender]}),(0,r.jsxs)("div",{children:["年齢: ",e.exhibitor.age,"歳"]}),(0,r.jsxs)("div",{children:["電話番号: ",e.exhibitor.phone_number]}),(0,r.jsxs)("div",{children:["メール: ",e.exhibitor.email]}),e.exhibitor.genre_category&&(0,r.jsxs)("div",{children:["ジャンル: ",e.exhibitor.genre_category]})]}),e.exhibitor.genre_free_text&&r.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"12px",padding:"12px",backgroundColor:"#f9f9f9",borderRadius:"4px"},children:e.exhibitor.genre_free_text}),(0,r.jsxs)("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid #e0e0e0"},children:[r.jsx("h4",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"12px"},children:"登録書類"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"12px"},children:[e.exhibitor.business_license_image_url&&(0,r.jsxs)("div",{children:[r.jsx("img",{src:e.exhibitor.business_license_image_url,alt:"営業許可証",style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"4px"}}),r.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"営業許可証"})]}),e.exhibitor.vehicle_inspection_image_url&&(0,r.jsxs)("div",{children:[r.jsx("img",{src:e.exhibitor.vehicle_inspection_image_url,alt:"車検証",style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"4px"}}),r.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"車検証"})]}),e.exhibitor.automobile_inspection_image_url&&(0,r.jsxs)("div",{children:[r.jsx("img",{src:e.exhibitor.automobile_inspection_image_url,alt:"自賠責保険",style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"4px"}}),r.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"自賠責保険"})]}),e.exhibitor.pl_insurance_image_url&&(0,r.jsxs)("div",{children:[r.jsx("img",{src:e.exhibitor.pl_insurance_image_url,alt:"PL保険",style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"4px"}}),r.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"PL保険"})]}),e.exhibitor.fire_equipment_layout_image_url&&(0,r.jsxs)("div",{children:[r.jsx("img",{src:e.exhibitor.fire_equipment_layout_image_url,alt:"消防設備配置図",style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"4px"}}),r.jsx("div",{style:{fontSize:"12px",color:"#666",marginTop:"4px"},children:"消防設備配置図"})]})]})]}),"pending"===e.application_status&&(0,r.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[r.jsx("button",{onClick:()=>b(e.id,"approved"),style:{flex:1,padding:"12px",backgroundColor:"#27ae60",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"承認"}),r.jsx("button",{onClick:()=>b(e.id,"rejected"),style:{flex:1,padding:"12px",backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"却下"})]}),(0,r.jsxs)("div",{style:{fontSize:"12px",color:"#999",marginTop:"12px"},children:["申し込み日時: ",new Date(e.applied_at).toLocaleString("ja-JP")]})]},e.id))})]})]})}},1036:(e,i,t)=>{t.d(i,{Z:()=>n});var r=t(4714),o=t(128),s=t.n(o);function n(){return(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px"},className:"jsx-ff161281ed666c63",children:[r.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #FF6B35",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-ff161281ed666c63"}),r.jsx(s(),{id:"ff161281ed666c63",children:"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}}};