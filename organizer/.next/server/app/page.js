(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7914:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,originalPathname:()=>x,pages:()=>p,routeModule:()=>u,tree:()=>s});var n=i(7),o=i(8533),r=i(9377),a=i.n(r),l=i(9799),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);i.d(t,d);let s=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,3214)),"/Users/mocky700/Desktop/デミセル/organizer/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(i.bind(i,9224)),"/Users/mocky700/Desktop/デミセル/organizer/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,3472,23)),"next/dist/client/components/not-found-error"]}],p=["/Users/mocky700/Desktop/デミセル/organizer/app/page.tsx"],x="/page",c={require:i,loadChunk:()=>Promise.resolve()},u=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:s}})},7642:(e,t,i)=>{Promise.resolve().then(i.bind(i,6898))},6898:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>z});var n=i(4714),o=i(7580),r=i(466);async function a(){try{let{data:{user:e},error:t}=await r.O.auth.getUser();if(t)return console.error("Error getting user:",t),null;return e}catch(e){return console.error("Error getting user:",e),null}}async function l(e,t){try{let{data:i,error:n}=await r.O.auth.signInWithPassword({email:e,password:t});if(n)throw n;return i}catch(e){throw console.error("Error signing in:",e),e}}async function d(e,t){try{let{data:i,error:n}=await r.O.auth.signUp({email:e,password:t});if(n)throw n;return i}catch(e){throw console.error("Error signing up:",e),e}}async function s(){try{let{data:e,error:t}=await r.O.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(t)throw t;return e}catch(e){throw console.error("Error signing in with Google:",e),e}}function p(){let[e,t]=(0,o.useState)(!0),[i,r]=(0,o.useState)(""),[a,p]=(0,o.useState)(""),[x,c]=(0,o.useState)(""),[u,g]=(0,o.useState)(!1),h=async t=>{t.preventDefault(),c(""),g(!0);try{e?await l(i,a):await d(i,a)}catch(e){c(e.message||"認証に失敗しました")}finally{g(!1)}},m=async()=>{c(""),g(!0);try{await s()}catch(e){c(e.message||"Google認証に失敗しました"),g(!1)}};return n.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-5 bg-gray-50",children:n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"w-full max-w-md",children:(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}()),{className:"pt-6",children:[n.jsx("h1",{className:"text-2xl font-bold text-center mb-8 text-gray-800",children:"主催者向けプラットフォーム"}),(0,n.jsxs)("div",{className:"flex mb-5 border-b border-gray-200",children:[n.jsx("button",{onClick:()=>{t(!0),c("")},className:`flex-1 px-3 py-3 text-base transition-colors ${e?"border-b-2 border-organizer text-organizer font-bold":"text-gray-600"}`,children:"ログイン"}),n.jsx("button",{onClick:()=>{t(!1),c("")},className:`flex-1 px-3 py-3 text-base transition-colors ${e?"text-gray-600":"border-b-2 border-organizer text-organizer font-bold"}`,children:"新規登録"})]}),x&&n.jsx("div",{className:"p-3 mb-5 bg-red-50 text-red-700 rounded text-sm",children:x}),(0,n.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block mb-2 text-sm text-gray-700",children:"メールアドレス"}),n.jsx("input",{type:"email",value:i,onChange:e=>r(e.target.value),required:!0,className:"w-full px-3 py-3 border border-gray-300 rounded text-base focus:outline-none focus:ring-2 focus:ring-organizer focus:border-transparent"})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{className:"block mb-2 text-sm text-gray-700",children:"パスワード"}),n.jsx("input",{type:"password",value:a,onChange:e=>p(e.target.value),required:!0,minLength:6,className:"w-full px-3 py-3 border border-gray-300 rounded text-base focus:outline-none focus:ring-2 focus:ring-organizer focus:border-transparent"})]}),n.jsx(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{type:"submit",disabled:u,className:"w-full bg-organizer hover:bg-organizer-dark disabled:opacity-50",children:u?"処理中...":e?"ログイン":"新規登録"})]}),n.jsx("div",{className:"text-center my-5 text-gray-400 text-sm",children:"または"}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{onClick:m,disabled:u,variant:"outline",className:"w-full",children:[n.jsx("span",{className:"mr-2",children:"\uD83D\uDD0D"}),"Googleで",e?"ログイン":"登録"]}),(0,n.jsxs)(Object(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e}()),{onClick:()=>{c(""),window.location.href="/api/auth/line-login"},disabled:u,className:"w-full bg-[#06C755] hover:bg-[#05A647] text-white",children:[n.jsx("span",{className:"mr-2",children:"\uD83D\uDCAC"}),"LINEで",e?"ログイン":"登録"]})]})]})})})}(function(){var e=Error("Cannot find module '@/components/ui/button'");throw e.code="MODULE_NOT_FOUND",e})(),function(){var e=Error("Cannot find module '@/components/ui/card'");throw e.code="MODULE_NOT_FOUND",e}();var x=i(8934);function c({currentStep:e,totalSteps:t}){let i=e/t*100;return(0,n.jsxs)("div",{style:{width:"100%",marginBottom:"20px"},children:[n.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#e0e0e0",borderRadius:"4px",overflow:"hidden"},children:n.jsx("div",{style:{width:`${i}%`,height:"100%",backgroundColor:"#FF6B35",transition:"width 0.3s ease"}})}),(0,n.jsxs)("div",{style:{textAlign:"center",marginTop:"8px",fontSize:"14px",color:"#666"},children:[e," / ",t]})]})}var u=i(1036);function g(){let e=(0,x.useRouter)(),[t,i]=(0,o.useState)(1),[l,d]=(0,o.useState)(!1),[s,p]=(0,o.useState)(""),[g,h]=(0,o.useState)({name:"",organizationName:"",phoneNumber:"",email:""}),m=(e,t)=>{h(i=>({...i,[e]:t}))},y=()=>!!g.name&&!!g.organizationName&&!!g.phoneNumber&&!!g.email||(p("すべての必須項目を入力してください"),!1),f=async()=>{p(""),d(!0);try{let t=await a();if(!t)throw Error("認証されていません");let{error:i}=await r.O.from("organizers").insert({user_id:t.id,name:g.name,organization_name:g.organizationName,phone_number:g.phoneNumber,email:g.email,is_approved:!1});if(i)throw i;e.push("/")}catch(e){p(e.message||"登録に失敗しました")}finally{d(!1)}};return l?n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(u.Z,{})}):n.jsx("div",{style:{minHeight:"100vh",padding:"20px",backgroundColor:"#f5f5f5"},children:(0,n.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto",backgroundColor:"white",borderRadius:"12px",padding:"30px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[n.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",textAlign:"center"},children:"主催者情報登録"}),n.jsx(c,{currentStep:t,totalSteps:2}),s&&n.jsx("div",{style:{padding:"12px",backgroundColor:"#fee",color:"#c33",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:s}),1===t&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"基本情報"}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["名前 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"text",value:g.name,onChange:e=>m("name",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["組織名 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"text",value:g.organizationName,onChange:e=>m("organizationName",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["電話番号 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"tel",value:g.phoneNumber,onChange:e=>m("phoneNumber",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["メールアドレス ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"email",value:g.email,onChange:e=>m("email",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]})]}),2===t&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"利用規約確認"}),(0,n.jsxs)("div",{style:{padding:"20px",backgroundColor:"#f9f9f9",borderRadius:"8px",marginBottom:"20px",maxHeight:"400px",overflowY:"auto"},children:[n.jsx("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"12px"},children:"利用規約"}),(0,n.jsxs)("div",{style:{fontSize:"14px",lineHeight:"1.6",color:"#666"},children:[n.jsx("p",{style:{marginBottom:"12px"},children:"本サービスをご利用いただくにあたり、以下の利用規約に同意していただく必要があります。"}),n.jsx("p",{style:{marginBottom:"12px"},children:"1. 主催者は、提供する情報が正確であることを保証します。"}),n.jsx("p",{style:{marginBottom:"12px"},children:"2. 主催者は、イベント情報を適切に管理する責任があります。"}),n.jsx("p",{style:{marginBottom:"12px"},children:"3. 主催者は、出店者の申請を承認または却下する権利を有します。"}),n.jsx("p",{style:{marginBottom:"12px"},children:"4. 個人情報は適切に管理され、本サービスの目的のみに使用されます。"})]})]}),(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",marginBottom:"20px",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",required:!0,style:{marginRight:"8px",width:"20px",height:"20px"}}),(0,n.jsxs)("span",{style:{fontSize:"14px"},children:["利用規約に同意します ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"30px"},children:[t>1&&n.jsx("button",{onClick:()=>{p(""),t>1&&i(t-1)},style:{flex:1,padding:"12px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"戻る"}),t<2?n.jsx("button",{onClick:()=>{p(""),y()&&i(2)},style:{flex:1,padding:"12px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"次へ"}):n.jsx("button",{onClick:f,style:{flex:1,padding:"12px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"登録する"})]})]})})}function h({event:e,onBack:t,onEdit:i,onDelete:o,onViewApplications:r}){return(0,n.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"#f5f5f5",paddingBottom:"80px"},children:[(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"16px",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:100},children:[n.jsx("button",{onClick:t,style:{padding:"8px 16px",backgroundColor:"#f0f0f0",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"← 戻る"}),(0,n.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[n.jsx("button",{onClick:i,style:{padding:"8px 16px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"編集"}),n.jsx("button",{onClick:o,style:{padding:"8px 16px",backgroundColor:"#e74c3c",color:"white",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"削除"})]})]}),n.jsx("div",{style:{padding:"20px"},children:(0,n.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[e.main_image_url&&n.jsx("img",{src:e.main_image_url,alt:e.event_name,style:{width:"100%",maxHeight:"300px",objectFit:"cover",borderRadius:"8px",marginBottom:"20px"}}),n.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"16px"},children:e.event_name}),(0,n.jsxs)("div",{style:{fontSize:"16px",color:"#666",marginBottom:"20px",lineHeight:"1.6"},children:[(0,n.jsxs)("div",{style:{marginBottom:"8px"},children:["\uD83D\uDCC5 ",new Date(e.event_start_date).toLocaleDateString("ja-JP")," - ",new Date(e.event_end_date).toLocaleDateString("ja-JP")]}),(0,n.jsxs)("div",{style:{marginBottom:"8px"},children:["\uD83D\uDCCD ",e.venue_name]})]}),e.lead_text&&n.jsx("div",{style:{fontSize:"16px",lineHeight:"1.6",marginBottom:"20px",padding:"16px",backgroundColor:"#f9f9f9",borderRadius:"8px"},children:e.lead_text}),e.event_description&&n.jsx("div",{style:{fontSize:"16px",lineHeight:"1.6",marginBottom:"20px",whiteSpace:"pre-wrap"},children:e.event_description}),n.jsx("button",{onClick:()=>r(e.id),style:{width:"100%",padding:"16px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer",marginTop:"20px"},children:"申し込み管理"})]})})]})}function m({onCreateEvent:e,onEditEvent:t}){let[i,l]=(0,o.useState)([]),[d,s]=(0,o.useState)(!0),[p,x]=(0,o.useState)(""),[c,g]=(0,o.useState)(null);(0,o.useEffect)(()=>{m()},[]);let m=async()=>{try{s(!0);let e=await a();if(!e){x("ログインが必要です");return}let{data:t}=await r.O.from("organizers").select("id").eq("user_id",e.id).single();if(!t){x("主催者情報が登録されていません");return}let{data:i,error:n}=await r.O.from("events").select("*").eq("organizer_id",t.id).order("created_at",{ascending:!1});if(n)throw n;l(i||[])}catch(e){console.error("Error loading events:",e),x(e.message||"イベントの読み込みに失敗しました")}finally{s(!1)}},y=async e=>{if(confirm("このイベントを削除しますか？"))try{let{error:t}=await r.O.from("events").delete().eq("id",e);if(t)throw t;m(),g(null)}catch(e){alert(e.message||"イベントの削除に失敗しました")}};return d?n.jsx("div",{style:{padding:"20px"},children:n.jsx(u.Z,{})}):c?n.jsx(h,{event:c,onBack:()=>g(null),onEdit:()=>{g(null),t(c.id)},onDelete:()=>y(c.id),onViewApplications:e=>{window.location.href=`/applications?eventId=${e}`}}):(0,n.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"#f5f5f5",paddingBottom:"80px"},children:[n.jsx("div",{style:{backgroundColor:"white",padding:"16px",borderBottom:"1px solid #e0e0e0",position:"sticky",top:0,zIndex:100},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[n.jsx("h1",{style:{fontSize:"20px",fontWeight:"bold"},children:"イベント管理"}),n.jsx("button",{onClick:e,style:{padding:"10px 20px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"+ 新規作成"})]})}),(0,n.jsxs)("div",{style:{padding:"20px"},children:[p&&n.jsx("div",{style:{padding:"16px",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"16px"},children:p}),0===i.length?(0,n.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCC5"}),n.jsx("div",{style:{fontSize:"16px",marginBottom:"20px"},children:"イベントがありません"}),n.jsx("button",{onClick:e,style:{padding:"12px 24px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"最初のイベントを作成"})]}):n.jsx("div",{style:{display:"grid",gap:"16px"},children:i.map(e=>(0,n.jsxs)("div",{onClick:()=>g(e),style:{backgroundColor:"white",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer",transition:"transform 0.2s"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[e.main_image_url&&n.jsx("div",{style:{width:"100%",height:"200px",backgroundImage:`url(${e.main_image_url})`,backgroundSize:"cover",backgroundPosition:"center"}}),(0,n.jsxs)("div",{style:{padding:"16px"},children:[n.jsx("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"8px",color:"#333"},children:e.event_name}),(0,n.jsxs)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:["\uD83D\uDCC5 ",new Date(e.event_start_date).toLocaleDateString("ja-JP")," - ",new Date(e.event_end_date).toLocaleDateString("ja-JP")]}),(0,n.jsxs)("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px"},children:["\uD83D\uDCCD ",e.venue_name]}),e.lead_text&&n.jsx("div",{style:{fontSize:"14px",color:"#999",marginTop:"8px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.lead_text}),e.approval_status&&n.jsx("div",{style:{marginTop:"12px"},children:n.jsx("span",{style:{padding:"4px 12px",backgroundColor:"approved"===e.approval_status?"#27ae60":"#f39c12",color:"white",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},children:"approved"===e.approval_status?"承認済み":"審査中"})})]})]},e.id))})]})]})}async function y(e,t,i){try{let{data:n,error:o}=await r.O.storage.from(e).upload(t,i,{cacheControl:"3600",upsert:!1});if(o)throw o;let{data:a}=r.O.storage.from(e).getPublicUrl(n.path);return a.publicUrl}catch(e){throw console.error("Error uploading image:",e),e}}function f({label:e,value:t,onChange:i,onFileSelect:r,required:a=!1}){let[l,d]=(0,o.useState)(t||null),[s,p]=(0,o.useState)(!1),x=e=>{let t=e.target.files?.[0];if(!t)return;let i=new FileReader;i.onloadend=()=>{d(i.result)},i.readAsDataURL(t),r(t)};return(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500",color:"#333"},children:[e,a&&n.jsx("span",{style:{color:"#e74c3c"},children:" *"})]}),n.jsx("div",{style:{border:"2px dashed #ccc",borderRadius:"8px",padding:"20px",textAlign:"center",backgroundColor:"#f9f9f9"},children:l?(0,n.jsxs)("div",{children:[n.jsx("img",{src:l,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px",marginBottom:"10px",borderRadius:"4px"}}),n.jsx("div",{children:(0,n.jsxs)("label",{style:{display:"inline-block",padding:"8px 16px",backgroundColor:"#FF6B35",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:["画像を変更",n.jsx("input",{type:"file",accept:"image/*",onChange:x,style:{display:"none"},disabled:s})]})})]}):(0,n.jsxs)("label",{style:{display:"block",cursor:"pointer"},children:[n.jsx("div",{style:{fontSize:"48px",color:"#999",marginBottom:"10px"},children:"\uD83D\uDCF7"}),n.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"10px"},children:"画像を選択"}),n.jsx("div",{style:{fontSize:"12px",color:"#999"},children:"JPG, PNG, GIF (最大 5MB)"}),n.jsx("input",{type:"file",accept:"image/*",onChange:x,style:{display:"none"},disabled:s})]})}),s&&n.jsx("div",{style:{marginTop:"10px",fontSize:"14px",color:"#666"},children:"アップロード中..."})]})}function b({eventId:e,onComplete:t,onCancel:i}){(0,x.useRouter)();let[l,d]=(0,o.useState)(1),[s,p]=(0,o.useState)(!1),[g,h]=(0,o.useState)(""),[m,b]=(0,o.useState)({eventName:"",eventNameFurigana:"",genre:"",isShizuokaVocationalAssocRelated:!1,optOutNewspaperPublication:!1,eventStartDate:"",eventEndDate:"",eventDisplayPeriod:"",eventPeriodNotes:"",eventTime:"",schedules:[],applicationStartDate:"",applicationEndDate:"",applicationDisplayPeriod:"",applicationNotes:"",ticketReleaseStartDate:"",ticketSalesLocation:"",leadText:"",eventDescription:"",eventIntroductionText:"",venueName:"",venuePostalCode:"",venueCity:"",venueTown:"",venueAddress:"",venueLatitude:"",venueLongitude:"",mainImage:null,mainImageCaption:""});(0,o.useEffect)(()=>{e&&v()},[e]);let v=async()=>{try{let{data:t,error:i}=await r.O.from("events").select("*").eq("id",e).single();if(i)throw i;t&&b({eventName:t.event_name||"",eventNameFurigana:t.event_name_furigana||"",genre:t.genre||"",isShizuokaVocationalAssocRelated:t.is_shizuoka_vocational_assoc_related||!1,optOutNewspaperPublication:t.opt_out_newspaper_publication||!1,eventStartDate:t.event_start_date||"",eventEndDate:t.event_end_date||"",eventDisplayPeriod:t.event_display_period||"",eventPeriodNotes:t.event_period_notes||"",eventTime:t.event_time||"",schedules:t.schedules||[],applicationStartDate:t.application_start_date||"",applicationEndDate:t.application_end_date||"",applicationDisplayPeriod:t.application_display_period||"",applicationNotes:t.application_notes||"",ticketReleaseStartDate:t.ticket_release_start_date||"",ticketSalesLocation:t.ticket_sales_location||"",leadText:t.lead_text||"",eventDescription:t.event_description||"",eventIntroductionText:t.event_introduction_text||"",venueName:t.venue_name||"",venuePostalCode:t.venue_postal_code||"",venueCity:t.venue_city||"",venueTown:t.venue_town||"",venueAddress:t.venue_address||"",venueLatitude:t.venue_latitude||"",venueLongitude:t.venue_longitude||"",mainImage:null,mainImageCaption:t.main_image_caption||""})}catch(e){console.error("Error loading event:",e),h(e.message||"イベントの読み込みに失敗しました")}},j=(e,t)=>{b(i=>({...i,[e]:t}))},S=async()=>{h(""),p(!0);try{let i=await a();if(!i)throw Error("認証されていません");let{data:n}=await r.O.from("organizers").select("id").eq("user_id",i.id).single();if(!n)throw Error("主催者情報が登録されていません");let o="";if(m.mainImage){let e=`events/${n.id}/${Date.now()}_${m.mainImage.name}`;o=await y("images",e,m.mainImage)}let l={organizer_id:n.id,event_name:m.eventName,event_name_furigana:m.eventNameFurigana,genre:m.genre,is_shizuoka_vocational_assoc_related:m.isShizuokaVocationalAssocRelated,opt_out_newspaper_publication:m.optOutNewspaperPublication,event_start_date:m.eventStartDate,event_end_date:m.eventEndDate,event_display_period:m.eventDisplayPeriod,event_period_notes:m.eventPeriodNotes||null,event_time:m.eventTime||null,schedules:m.schedules.length>0?m.schedules:null,application_start_date:m.applicationStartDate||null,application_end_date:m.applicationEndDate||null,application_display_period:m.applicationDisplayPeriod||null,application_notes:m.applicationNotes||null,ticket_release_start_date:m.ticketReleaseStartDate||null,ticket_sales_location:m.ticketSalesLocation||null,lead_text:m.leadText,event_description:m.eventDescription,event_introduction_text:m.eventIntroductionText||null,venue_name:m.venueName,venue_postal_code:m.venuePostalCode||null,venue_city:m.venueCity||null,venue_town:m.venueTown||null,venue_address:m.venueAddress||null,venue_latitude:m.venueLatitude||null,venue_longitude:m.venueLongitude||null,main_image_caption:m.mainImageCaption||null};if(o&&(l.main_image_url=o),e){let{error:t}=await r.O.from("events").update(l).eq("id",e);if(t)throw t}else{let{error:e}=await r.O.from("events").insert(l);if(e)throw e}t()}catch(e){h(e.message||"イベントの保存に失敗しました")}finally{p(!1)}};return s?n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(u.Z,{})}):n.jsx("div",{style:{minHeight:"100vh",padding:"20px",backgroundColor:"#f5f5f5",paddingBottom:"100px"},children:(0,n.jsxs)("div",{style:{maxWidth:"600px",margin:"0 auto",backgroundColor:"white",borderRadius:"12px",padding:"30px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[n.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",marginBottom:"20px",textAlign:"center"},children:e?"イベント編集":"イベント作成"}),n.jsx(c,{currentStep:l,totalSteps:7}),g&&n.jsx("div",{style:{padding:"12px",backgroundColor:"#fee",color:"#c33",borderRadius:"4px",marginBottom:"20px",fontSize:"14px"},children:g}),1===l&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"基本情報"}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["イベント名 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"text",value:m.eventName,onChange:e=>j("eventName",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"イベント名（ふりがな）"}),n.jsx("input",{type:"text",value:m.eventNameFurigana,onChange:e=>j("eventNameFurigana",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"ジャンル"}),n.jsx("input",{type:"text",value:m.genre,onChange:e=>j("genre",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),n.jsx("div",{style:{marginBottom:"16px"},children:(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",checked:m.isShizuokaVocationalAssocRelated,onChange:e=>j("isShizuokaVocationalAssocRelated",e.target.checked),style:{marginRight:"8px",width:"20px",height:"20px"}}),n.jsx("span",{style:{fontSize:"14px"},children:"静岡県職業能力開発協会関連"})]})}),n.jsx("div",{style:{marginBottom:"20px"},children:(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[n.jsx("input",{type:"checkbox",checked:m.optOutNewspaperPublication,onChange:e=>j("optOutNewspaperPublication",e.target.checked),style:{marginRight:"8px",width:"20px",height:"20px"}}),n.jsx("span",{style:{fontSize:"14px"},children:"新聞掲載オプトアウト"})]})})]}),2===l&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"日程・時間"}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["開始日 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"date",value:m.eventStartDate,onChange:e=>j("eventStartDate",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["終了日 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"date",value:m.eventEndDate,onChange:e=>j("eventEndDate",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"表示期間"}),n.jsx("input",{type:"text",value:m.eventDisplayPeriod,onChange:e=>j("eventDisplayPeriod",e.target.value),placeholder:"例: 2024年1月1日〜1月31日",style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"時間"}),n.jsx("input",{type:"text",value:m.eventTime,onChange:e=>j("eventTime",e.target.value),placeholder:"例: 10:00〜18:00",style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"備考"}),n.jsx("textarea",{value:m.eventPeriodNotes,onChange:e=>j("eventPeriodNotes",e.target.value),rows:4,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px",fontFamily:"inherit"}})]})]}),3===l&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"申し込み期間"}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"申し込み開始日"}),n.jsx("input",{type:"date",value:m.applicationStartDate,onChange:e=>j("applicationStartDate",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"申し込み終了日"}),n.jsx("input",{type:"date",value:m.applicationEndDate,onChange:e=>j("applicationEndDate",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"表示期間"}),n.jsx("input",{type:"text",value:m.applicationDisplayPeriod,onChange:e=>j("applicationDisplayPeriod",e.target.value),placeholder:"例: 2024年1月1日〜1月15日",style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"備考"}),n.jsx("textarea",{value:m.applicationNotes,onChange:e=>j("applicationNotes",e.target.value),rows:4,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px",fontFamily:"inherit"}})]})]}),4===l&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"チケット情報"}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"発売開始日"}),n.jsx("input",{type:"date",value:m.ticketReleaseStartDate,onChange:e=>j("ticketReleaseStartDate",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"販売場所"}),n.jsx("input",{type:"text",value:m.ticketSalesLocation,onChange:e=>j("ticketSalesLocation",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]})]}),5===l&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"イベント内容"}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["リードテキスト ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("textarea",{value:m.leadText,onChange:e=>j("leadText",e.target.value),required:!0,rows:3,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px",fontFamily:"inherit"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["説明 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("textarea",{value:m.eventDescription,onChange:e=>j("eventDescription",e.target.value),required:!0,rows:6,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px",fontFamily:"inherit"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"紹介文"}),n.jsx("textarea",{value:m.eventIntroductionText,onChange:e=>j("eventIntroductionText",e.target.value),rows:4,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px",fontFamily:"inherit"}})]})]}),6===l&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"会場情報"}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["会場名 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"text",value:m.venueName,onChange:e=>j("venueName",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"郵便番号"}),n.jsx("input",{type:"text",value:m.venuePostalCode,onChange:e=>j("venuePostalCode",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"都道府県"}),n.jsx("input",{type:"text",value:m.venueCity,onChange:e=>j("venueCity",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"市区町村"}),n.jsx("input",{type:"text",value:m.venueTown,onChange:e=>j("venueTown",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"住所"}),n.jsx("input",{type:"text",value:m.venueAddress,onChange:e=>j("venueAddress",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"20px"},children:[(0,n.jsxs)("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"緯度"}),n.jsx("input",{type:"text",value:m.venueLatitude,onChange:e=>j("venueLatitude",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"経度"}),n.jsx("input",{type:"text",value:m.venueLongitude,onChange:e=>j("venueLongitude",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]})]})]}),7===l&&(0,n.jsxs)("div",{children:[n.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"20px"},children:"画像アップロード"}),n.jsx(f,{label:"メイン画像",onChange:e=>j("mainImageUrl",e),onFileSelect:e=>j("mainImage",e)}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"画像キャプション"}),n.jsx("input",{type:"text",value:m.mainImageCaption,onChange:e=>j("mainImageCaption",e.target.value),style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"30px"},children:[n.jsx("button",{onClick:i,style:{flex:1,padding:"12px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"キャンセル"}),l>1&&n.jsx("button",{onClick:()=>{h(""),d(e=>Math.max(e-1,1))},style:{flex:1,padding:"12px",backgroundColor:"#f0f0f0",color:"#333",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"500",cursor:"pointer"},children:"戻る"}),l<7?n.jsx("button",{onClick:()=>{h(""),d(e=>Math.min(e+1,7))},style:{flex:1,padding:"12px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"次へ"}):n.jsx("button",{onClick:S,style:{flex:1,padding:"12px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:"pointer"},children:"保存"})]})]})})}function v(){let[e,t]=(0,o.useState)("list"),[i,r]=(0,o.useState)();return"create"===e||"edit"===e?n.jsx(b,{eventId:i,onComplete:()=>{t("list"),r(void 0)},onCancel:()=>{t("list"),r(void 0)}}):n.jsx(m,{onCreateEvent:()=>{r(void 0),t("create")},onEditEvent:e=>{r(e),t("edit")}})}function j({organizer:e,onComplete:t,onCancel:i}){let[a,l]=(0,o.useState)(!1),[d,s]=(0,o.useState)(""),[p,x]=(0,o.useState)({name:e.name,organizationName:e.organization_name,phoneNumber:e.phone_number,email:e.email}),c=(e,t)=>{x(i=>({...i,[e]:t}))},g=async i=>{i.preventDefault(),s(""),l(!0);try{let{error:i}=await r.O.from("organizers").update({name:p.name,organization_name:p.organizationName,phone_number:p.phoneNumber,email:p.email}).eq("id",e.id);if(i)throw i;t()}catch(e){s(e.message||"更新に失敗しました")}finally{l(!1)}};return a?n.jsx("div",{style:{padding:"20px"},children:n.jsx(u.Z,{})}):(0,n.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"#f5f5f5",paddingBottom:"80px"},children:[(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"16px",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h1",{style:{fontSize:"20px",fontWeight:"bold"},children:"プロフィール編集"}),n.jsx("button",{onClick:i,style:{padding:"8px 16px",backgroundColor:"#f0f0f0",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"キャンセル"})]}),(0,n.jsxs)("div",{style:{padding:"20px"},children:[d&&n.jsx("div",{style:{padding:"12px",backgroundColor:"#fee",color:"#c33",borderRadius:"4px",marginBottom:"20px"},children:d}),n.jsx("form",{onSubmit:g,children:(0,n.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["名前 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"text",value:p.name,onChange:e=>c("name",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["組織名 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"text",value:p.organizationName,onChange:e=>c("organizationName",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["電話番号 ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"tel",value:p.phoneNumber,onChange:e=>c("phoneNumber",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,n.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:["メールアドレス ",n.jsx("span",{style:{color:"#e74c3c"},children:"*"})]}),n.jsx("input",{type:"email",value:p.email,onChange:e=>c("email",e.target.value),required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"16px"}})]}),n.jsx("button",{type:"submit",style:{width:"100%",padding:"16px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"8px",fontSize:"18px",fontWeight:"bold",cursor:"pointer"},children:"更新する"})]})})]})]})}function S(){let[e,t]=(0,o.useState)(null),[i,l]=(0,o.useState)(!0),[d,s]=(0,o.useState)(""),[p,x]=(0,o.useState)(!1);(0,o.useEffect)(()=>{c()},[]);let c=async()=>{try{l(!0);let e=await a();if(!e){s("ログインが必要です");return}let{data:i,error:n}=await r.O.from("organizers").select("*").eq("user_id",e.id).single();if(n)throw n;t(i)}catch(e){console.error("Error loading profile:",e),s(e.message||"プロフィールの読み込みに失敗しました")}finally{l(!1)}};return i?n.jsx("div",{style:{padding:"20px"},children:n.jsx(u.Z,{})}):d&&!e?n.jsx("div",{style:{padding:"20px",textAlign:"center"},children:n.jsx("div",{style:{padding:"16px",backgroundColor:"#fee",color:"#c33",borderRadius:"8px"},children:d})}):p&&e?n.jsx(j,{organizer:e,onComplete:()=>{x(!1),c()},onCancel:()=>x(!1)}):e?(0,n.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"#f5f5f5",paddingBottom:"80px"},children:[(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"16px",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h1",{style:{fontSize:"20px",fontWeight:"bold"},children:"プロフィール"}),n.jsx("button",{onClick:()=>x(!0),style:{padding:"8px 16px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"編集"})]}),n.jsx("div",{style:{padding:"20px"},children:(0,n.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#999",marginBottom:"4px"},children:"名前"}),n.jsx("div",{style:{fontSize:"18px",fontWeight:"500"},children:e.name})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#999",marginBottom:"4px"},children:"組織名"}),n.jsx("div",{style:{fontSize:"18px"},children:e.organization_name})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#999",marginBottom:"4px"},children:"電話番号"}),n.jsx("div",{style:{fontSize:"18px"},children:e.phone_number})]}),(0,n.jsxs)("div",{style:{marginBottom:"20px"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#999",marginBottom:"4px"},children:"メールアドレス"}),n.jsx("div",{style:{fontSize:"18px"},children:e.email})]}),(0,n.jsxs)("div",{style:{marginTop:"30px",paddingTop:"20px",borderTop:"1px solid #e0e0e0"},children:[n.jsx("div",{style:{fontSize:"14px",color:"#999",marginBottom:"4px"},children:"承認ステータス"}),n.jsx("div",{children:n.jsx("span",{style:{padding:"4px 12px",backgroundColor:e.is_approved?"#27ae60":"#f39c12",color:"white",borderRadius:"12px",fontSize:"14px",fontWeight:"500"},children:e.is_approved?"承認済み":"審査中"})})]})]})})]}):n.jsx("div",{style:{padding:"20px",textAlign:"center"},children:n.jsx("div",{style:{fontSize:"16px",color:"#999"},children:"プロフィール情報がありません"})})}function w(){let[e,t]=(0,o.useState)([]),[i,l]=(0,o.useState)(0),[d,s]=(0,o.useState)(!0),[p,x]=(0,o.useState)("");(0,o.useEffect)(()=>{c();let e=setInterval(c,3e4);return()=>clearInterval(e)},[]);let c=async()=>{try{let e=await a();if(!e){s(!1);return}let{data:i,error:n}=await r.O.from("notifications").select("*").eq("user_id",e.id).eq("user_type","organizer").order("created_at",{ascending:!1}).limit(50);if(n)throw n;t(i||[]),l((i||[]).filter(e=>!e.is_read).length)}catch(e){console.error("Error loading notifications:",e),x(e.message||"通知の読み込みに失敗しました")}finally{s(!1)}},g=async e=>{try{let{error:i}=await r.O.from("notifications").update({is_read:!0}).eq("id",e);if(i)throw i;t(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),l(e=>Math.max(0,e-1))}catch(e){console.error("Error marking notification as read:",e)}},h=async()=>{try{let e=await a();if(!e)return;let{error:i}=await r.O.from("notifications").update({is_read:!0}).eq("user_id",e.id).eq("user_type","organizer").eq("is_read",!1);if(i)throw i;t(e=>e.map(e=>({...e,is_read:!0}))),l(0)}catch(e){console.error("Error marking all as read:",e)}},m=e=>{e.is_read||g(e.id),e.related_event_id?window.location.href=`/events?eventId=${e.related_event_id}`:e.related_application_id&&(window.location.href=`/applications?applicationId=${e.related_application_id}`)};return d?n.jsx("div",{style:{padding:"20px"},children:n.jsx(u.Z,{})}):(0,n.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:"#f5f5f5",paddingBottom:"80px"},children:[(0,n.jsxs)("div",{style:{backgroundColor:"white",padding:"16px",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:100},children:[(0,n.jsxs)("h1",{style:{fontSize:"20px",fontWeight:"bold"},children:["通知",i>0&&n.jsx("span",{style:{marginLeft:"8px",padding:"2px 8px",backgroundColor:"#e74c3c",color:"white",borderRadius:"12px",fontSize:"12px"},children:i})]}),i>0&&n.jsx("button",{onClick:h,style:{padding:"8px 16px",backgroundColor:"#FF6B35",color:"white",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer"},children:"すべて既読にする"})]}),(0,n.jsxs)("div",{style:{padding:"20px"},children:[p&&n.jsx("div",{style:{padding:"16px",backgroundColor:"#fee",color:"#c33",borderRadius:"8px",marginBottom:"16px"},children:p}),0===e.length?(0,n.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"#999"},children:[n.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDD14"}),n.jsx("div",{style:{fontSize:"16px"},children:"通知はありません"})]}):n.jsx("div",{style:{display:"grid",gap:"12px"},children:e.map(e=>(0,n.jsxs)("div",{onClick:()=>m(e),style:{backgroundColor:e.is_read?"white":"#fff5f0",borderRadius:"8px",padding:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer",borderLeft:e.is_read?"none":"4px solid #FF6B35"},children:[n.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"8px",color:e.is_read?"#666":"#333"},children:e.title}),n.jsx("div",{style:{fontSize:"14px",color:"#666",marginBottom:"8px",lineHeight:"1.5"},children:e.message}),n.jsx("div",{style:{fontSize:"12px",color:"#999"},children:new Date(e.created_at).toLocaleString("ja-JP")})]},e.id))})]})]})}var _=i(8635);function z(){let[e,t]=(0,o.useState)(null),[i,l]=(0,o.useState)(null),[d,s]=(0,o.useState)(!0),[x,c]=(0,o.useState)("events");(0,o.useEffect)(()=>{h();let{data:{subscription:e}}=r.O.auth.onAuthStateChange(async(e,i)=>{"SIGNED_OUT"!==e&&i?"SIGNED_IN"===e&&i&&await h():(t(null),l(null))});return()=>{e.unsubscribe()}},[]);let h=async()=>{try{s(!0);let{data:{session:e},error:i}=await r.O.auth.getSession();if(i||!e){t(null),l(null),s(!1);return}let n=await a();if(!n){t(null),l(null),s(!1);return}t(n);let{data:o,error:d}=await r.O.from("organizers").select("*").eq("user_id",n.id).single();d&&"PGRST116"!==d.code&&console.error("Error checking organizer:",d),l(o||null)}catch(e){console.error("Error checking auth:",e),t(null),l(null)}finally{s(!1)}};if(d)return n.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(u.Z,{})});if(!e)return n.jsx(p,{});if(!i)return n.jsx(g,{});let[m,y]=(0,o.useState)(0);return(0,o.useEffect)(()=>{if(e){let t=async()=>{try{let{data:t,error:i}=await r.O.from("notifications").select("id").eq("user_id",e.id).eq("user_type","organizer").eq("is_read",!1);!i&&t&&y(t.length)}catch(e){console.error("Error loading unread count:",e)}};t();let i=setInterval(t,3e4);return()=>clearInterval(i)}},[e]),(0,o.useEffect)(()=>{},[]),(0,n.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[(()=>{switch(x){case"events":default:return n.jsx(v,{});case"profile":return n.jsx(S,{});case"notifications":return n.jsx(w,{});case"applications":return n.jsx(_.Z,{})}})(),(0,n.jsxs)("div",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:"white",borderTop:"1px solid #e0e0e0",display:"flex",justifyContent:"space-around",padding:"8px 0",zIndex:1e3},children:[(0,n.jsxs)("button",{onClick:()=>c("notifications"),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"8px",border:"none",backgroundColor:"transparent",cursor:"pointer",color:"notifications"===x?"#FF6B35":"#666"},children:[(0,n.jsxs)("div",{style:{position:"relative"},children:[n.jsx("span",{style:{fontSize:"24px"},children:"\uD83D\uDD14"}),m>0&&n.jsx("span",{style:{position:"absolute",top:"-4px",right:"-8px",backgroundColor:"#e74c3c",color:"white",borderRadius:"10px",fontSize:"10px",padding:"2px 6px",minWidth:"18px",textAlign:"center"},children:m>99?"99+":m})]}),n.jsx("span",{style:{fontSize:"12px",marginTop:"4px"},children:"通知"})]}),(0,n.jsxs)("button",{onClick:()=>c("events"),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"8px",border:"none",backgroundColor:"transparent",cursor:"pointer",color:"events"===x?"#FF6B35":"#666"},children:[n.jsx("span",{style:{fontSize:"24px"},children:"\uD83D\uDCC5"}),n.jsx("span",{style:{fontSize:"12px",marginTop:"4px"},children:"作成・履歴"})]}),(0,n.jsxs)("button",{onClick:()=>c("profile"),style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"8px",border:"none",backgroundColor:"transparent",cursor:"pointer",color:"profile"===x?"#FF6B35":"#666"},children:[n.jsx("span",{style:{fontSize:"24px"},children:"\uD83D\uDC64"}),n.jsx("span",{style:{fontSize:"12px",marginTop:"4px"},children:"プロフィール"})]})]})]})}},3214:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>r,__esModule:()=>o,default:()=>a});let n=(0,i(1481).createProxy)(String.raw`/Users/mocky700/Desktop/デミセル/organizer/app/page.tsx`),{__esModule:o,$$typeof:r}=n,a=n.default}};var t=require("../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[499,95,41,365,635],()=>i(7914));module.exports=n})();